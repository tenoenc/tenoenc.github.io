---
layout: post
title: "[Web] REST APIμ™€ μ„±μ™λ„ λ¨λΈ"
date: 2026-01-05 23:28 +0900
math: true
categories:
- Computer Science
- Network
tags:
- Web
- REST
- REST API
- RMM
image:
    path: /assets/img/2026-01-06-00-14-14.png
---

λ„μ‹λ¥Ό μ„¤κ³„ν•  λ• λ„λ΅μ ν­, κ±΄λ¬Όμ μ©λ„ μ ν•, μƒν•μλ„μ μ„μΉλ¥Ό κ·μ •ν•λ” λ²•κ·λ” μ°½μμ„±μ„ μ ν•ν•λ” κ²ƒμ²λΌ λ³΄μ…λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ¬ν• μ μ•½ λ•λ¶„μ— μλ°±λ§ λ…μ μ‹λ―Όμ΄ μμΈ΅ κ°€λ¥ν• λ°©μ‹μΌλ΅ μƒνΈμ‘μ©ν•λ©° κ±°λ€ν• μ ν† ν”Όμ•„λ¥Ό μ μ§€ν•©λ‹λ‹¤. μ†ν”„νΈμ›¨μ–΄ μ•„ν‚¤ν…μ²μ μ„Έκ³„μ—μ„ REST(Representational State Transfer)λ” λ°”λ΅ μ΄ 'λ„μ‹ κ³„ν λ²•κ·'μ™€ κ°™μµλ‹λ‹¤. 

λ§μ€ κ°λ°μκ°€ RESTλ¥Ό λ‹¨μν 'JSONμ„ μ£Όκ³ λ°›λ” HTTP API'λ΅ μ¤ν•΄ν•κ³¤ ν•©λ‹λ‹¤. ν•μ§€λ§ λ΅μ΄ ν•„λ”©(Roy Fielding)μ΄ κ·Έμ λ…Όλ¬Έμ—μ„ μ •μν• RESTλ” λ‹¨μν λ°μ΄ν„° ν•μ‹μ„ κ·μ •ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, μ „ μ§€κµ¬μ  κ·λ¨μ λ¶„μ‚° μ‹μ¤ν…μ΄ μ–΄λ–»κ² μμ‹­ λ…„κ°„ λ¶•κ΄΄ν•μ§€ μ•κ³  μ§„ν™”ν•  μ μλ”μ§€μ— λ€ν• μ² ν•™μ  ν•΄λ‹µμ„ μ μ‹ν•©λ‹λ‹¤.

## π§© REST API

λ΅μ΄ ν•„λ”©μ λ…Όλ¬Έμ— λ”°λ¥΄λ©΄, RESTλ” λ¶„μ‚° ν•μ΄νΌλ―Έλ””μ–΄ μ‹μ¤ν…μ„ μ„ν• μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ…λ‹λ‹¤. μ΄λ” νΉμ • κΈ°μ μ΄λ‚ ν”„λ΅ν† μ½μ΄ μ•„λ‹λΌ, μ‹μ¤ν…μ κ° κµ¬μ„± μ”μ†κ°€ μ§€μΌμ•Ό ν•  'μ μ•½ μ΅°κ±΄λ“¤μ μ§‘ν•©'μ…λ‹λ‹¤. μ΄ μ μ•½λ“¤μ„ ν•λ‚μ”© μ¤€μν•  λ•λ§λ‹¤ μ‹μ¤ν…μ€ λ…λ³΄μ μΈ κ°€μ‹μ„±(Visibility), μ‹ λΆ°μ„±(Reliability), κ·Έλ¦¬κ³  ν™•μ¥μ„±(Scalability)μ„ μ–»κ² λ©λ‹λ‹¤.

### Resource

RESTμ κ°€μ¥ κ·Όλ³Έμ μΈ λ‹¨μ„λ” λ¦¬μ†μ¤(Resource)μ…λ‹λ‹¤. λ¦¬μ†μ¤λ” μ΄λ¦„μ΄ λ¶™μ—¬μ§ μ μλ” λ¨λ“  μ •λ³΄μ μ¶”μƒν™”μ…λ‹λ‹¤. μ—¬κΈ°μ„ ν•µμ‹¬μ€ λ¦¬μ†μ¤κ°€ νΉμ • μ‹μ μ λ°μ΄ν„° κ°’(Value)μ΄ μ•„λ‹λΌ, κ·Έ κ°λ…μ μΈ 'λ§¤ν•‘' μμ²΄λΌλ” μ μ…λ‹λ‹¤.

μλ¥Ό λ“¤μ–΄, `https://api.example.com/users/123/recent-orders`λΌλ” URIλ” '123λ² μ‚¬μ©μμ μµκ·Ό μ£Όλ¬Έ λ©λ΅'μ΄λΌλ” κ°λ…μ  λ€μƒμ„ κ°€λ¦¬ν‚µλ‹λ‹¤. μ‹¤μ  λ°μ΄ν„°λ” μ‹κ°„μ΄ νλ¦„μ— λ”°λΌ λ³€ν•κ² μ§€λ§, λ¦¬μ†μ¤κ°€ κ°€λ¦¬ν‚¤λ” λ€μƒμ λ³Έμ§μ€ λ³€ν•μ§€ μ•μµλ‹λ‹¤. RESTful μ„¤κ³„μ μ²« λ²μ§Έ μ‹¤ν¨ μ§€μ μ€ μ—¬κΈ°μ— λ™μ‚¬λ¥Ό ν¬ν•¨ν•λ” κ²ƒμ…λ‹λ‹¤. `/getUsers`λ‚ `/createOrder`μ™€ κ°™μ€ κ²½λ΅λ” λ¦¬μ†μ¤λ¥Ό μ‹λ³„ν•λ” κ²ƒμ΄ μ•„λ‹λΌ ν–‰μ„λ¥Ό κΈ°μ ν•©λ‹λ‹¤. μ΄λ” κ°μ²΄ μ§€ν–¥ ν”„λ΅ν† μ½λ΅μ ν‡΄ν–‰μ„ μλ―Έν•λ©°, URIμ κ³ μ ν• μ‹λ³„ λ¥λ ¥μ„ νκ΄΄ν•©λ‹λ‹¤.

### Representation

λ¦¬μ†μ¤ μμ²΄λ” μ¶”μƒμ μ΄κΈ° λ•λ¬Έμ— μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¦¬μ†μ¤λ¥Ό μ£Όκ³ λ°›μ„ μλ” μ—†μµλ‹λ‹¤. λ€μ‹  μ„λ²„λ” λ¦¬μ†μ¤μ νΉμ • μ‹μ μ μƒνƒλ¥Ό μΊ΅μ²ν• 'ν‘ν„(Representation)'μ„ μ „λ‹¬ν•©λ‹λ‹¤. 

μ°λ¦¬κ°€ ν”ν μ ‘ν•λ” JSONμ΄λ‚ XMLμ€ λ¦¬μ†μ¤μ ν‘ν„ μ–‘μ‹ μ¤‘ ν•λ‚μΌ λΏμ…λ‹λ‹¤. λ™μΌν• 'μ‚¬μ©μ λ¦¬μ†μ¤'λΌλ„ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­(`Accept` ν—¤λ”)μ— λ”°λΌ ν”„λ΅ν•„ μ΄λ―Έμ§€κ°€ ν¬ν•¨λ HTMLμ΄ λ  μλ„ μκ³ , κΈ°κ³„ νλ…μ΄ κ°€λ¥ν• JSONμ΄ λ  μλ„ μμµλ‹λ‹¤. 


> **ν‘ν„(Representation)μ κµ¬μ„± μ”μ†**
> 
> λ¦¬μ†μ¤μ μƒνƒλ¥Ό λ‹΄μ€ λ°μ΄ν„°μ™€ κ·Έ λ°μ΄ν„°λ¥Ό μ„¤λ…ν•λ” λ©”νƒ€λ°μ΄ν„°(Content-Type λ“±)μ κ²°ν•©μ²΄μ…λ‹λ‹¤. λ΅μ΄ ν•„λ”©μ€ ν•μ΄νΌλ―Έλ””μ–΄λ¥Ό ν†µν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ μƒνƒκ°€ μ „μ΄λλ” λ°©μ‹μ„ μ¤‘μ‹ν–μµλ‹λ‹¤.
{: .prompt-info }

![](/assets/img/2026-01-10-15-34-34.png)

### Statelessness

RESTμ λ¬΄μƒνƒμ„±(Statelessness) μ μ•½μ€ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ΄μ „ μ”μ²­ λ¬Έλ§¥μ„ κΈ°μ–µν•μ§€ μ•μ•„μ•Ό ν•¨μ„ μλ―Έν•©λ‹λ‹¤. λ¨λ“  μ”μ²­μ€ κ·Έ μμ²΄λ΅ μ™„κ²°μ μ΄μ–΄μ•Ό ν•λ©°, μ„λ²„κ°€ ν•΄λ‹Ή μ”μ²­μ„ μ²λ¦¬ν•λ” λ° ν•„μ”ν• λ¨λ“  μ •λ³΄λ¥Ό ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.

Amazon Builders' Libraryμ μλ£μ— λ”°λ¥΄λ©΄, λ¶„μ‚° μ‹μ¤ν…μ—μ„ μ„λ²„λ” μ–Έμ λ“  μ‹¤ν¨ν•  μ μλ” μ†λ¨ν’(Cattle)μ…λ‹λ‹¤. λ§μ•½ μ„λ²„κ°€ μ„Έμ… μƒνƒλ¥Ό λ©”λ¨λ¦¬μ— λ“¤κ³  μλ‹¤λ©΄, ν•΄λ‹Ή μ„λ²„κ°€ μ¥μ• λ΅ μΈν•΄ μ¬μ‹μ‘λκ±°λ‚ λ΅λ“ λ°Έλ°μ„μ— μν•΄ λ‹¤λ¥Έ λ…Έλ“λ΅ μ”μ²­μ΄ μ „λ‹¬λ  λ• μ‹μ¤ν…μ€ λ§λΉ„λ©λ‹λ‹¤. λ¬΄μƒνƒμ„±μ€ μ„λ²„μ μμ›μ„ μ μ ν•λ” 'κ³ μ°©μ„±'μ„ μ κ±°ν•¨μΌλ΅μ¨ μν‰μ  ν™•μ¥(Scale-out)μ„ κ·Ήλ€ν™”ν•©λ‹λ‹¤. μ΄λ” μ„λ²„μ μ¤λ λ“μ™€ λ©”λ¨λ¦¬ μμ›μ„ ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•μ—¬, λ™μ‹ μ ‘μ†μκ°€ ν­μ¦ν•λ” ν™κ²½μ—μ„λ„ μ‹μ¤ν…μ νλ³µ νƒ„λ ¥μ„±μ„ μ μ§€ν•λ” ν•µμ‹¬ κΈ°μ κ°€ λ©λ‹λ‹¤.

### Uniform Interface

RESTλ¥Ό λ‹¤λ¥Έ λ„¤νΈμ›ν¬ μ•„ν‚¤ν…μ² μ¤νƒ€μΌκ³Ό μ°¨λ³„ν™”ν•λ” κ°€μ¥ κ°•λ ¥ν• μ μ•½μ€ 'μΌκ΄€λ μΈν„°νμ΄μ¤(Uniform Interface)'μ…λ‹λ‹¤. μ΄λ” μ‹μ¤ν… κµ¬μ„± μ”μ† κ°„μ μƒνΈμ‘μ©μ„ λ‹¨μν™”ν•κ³  λ””μ»¤ν”λ§μ„ μ™„μ„±ν•©λ‹λ‹¤. λ΅μ΄ ν•„λ”©μ€ μ΄λ¥Ό μ„ν•΄ λ„¤ κ°€μ§€ μ„Έλ¶€ μ μ•½μ„ μ μ‹ν–μµλ‹λ‹¤.

1.  **λ¦¬μ†μ¤ μ‹λ³„**: URIλ¥Ό ν†µν•΄ λ¦¬μ†μ¤λ¥Ό λ…ν™•ν κµ¬λ¶„ν•©λ‹λ‹¤.
2.  **ν‘ν„μ„ ν†µν• λ¦¬μ†μ¤ μ΅°μ‘**: ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤λ¥Ό μμ •ν•  λ•, λ¦¬μ†μ¤ μμ²΄κ°€ μ•„λ‹ κ·Έ ν‘ν„μ„ μ„λ²„μ— μ „λ‹¬ν•μ—¬ μλ„λ¥Ό λ…μ‹ν•©λ‹λ‹¤.
3.  **μκΈ° μ„μ μ  λ©”μ‹μ§€(Self-descriptive messages)**: λ©”μ‹μ§€λ§ λ³΄κ³ λ„ μ΄λ¥Ό μ–΄λ–»κ² μ²λ¦¬ν• μ§€ μ• μ μμ–΄μ•Ό ν•©λ‹λ‹¤. (μ: `Content-Type` ν—¤λ”κ°€ λ°λ“μ‹ μ΅΄μ¬ν•΄μ•Ό ν•¨)
4.  **HATEOAS(Hypermedia As The Engine Of Application State)**: μ• ν”λ¦¬μΌ€μ΄μ…μ λ‹¤μ μƒνƒλ΅ κ°€κΈ° μ„ν• κ²½λ΅κ°€ μ‘λ‹µ λ³Έλ¬Έμ ν•μ΄νΌλ§ν¬λ¥Ό ν†µν•΄ λ™μ μΌλ΅ μ κ³µλμ–΄μ•Ό ν•©λ‹λ‹¤.

λ€λ¶€λ¶„μ ν„λ€ APIλ” 1, 2λ²μ€ μ μ§€ν‚¤μ§€λ§ 3, 4λ²μ—μ„ λ¬΄λ„μ§‘λ‹λ‹¤. νΉν HATEOASκ°€ κ²°μ—¬λ APIλ” ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ URI κµ¬μ΅°λ¥Ό λ―Έλ¦¬ μ•κ³  μμ–΄μ•Ό ν•λ―€λ΅, μ„λ²„μ μΈν„°νμ΄μ¤κ°€ λ³€κ²½λ  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» μμ •λμ–΄μ•Ό ν•λ” κ°•ν• κ²°ν•©(Tight Coupling) λ¬Έμ λ¥Ό λ°μƒμ‹ν‚µλ‹λ‹¤. 

```http
# GET /users/123/profile HTTP/1.1
# Host: api.example.com
# Accept: application/hal+json

HTTP/1.1 200 OK
Content-Type: application/hal+json; charset=utf-8
Cache-Control: public, max-age=3600
Vary: Accept-Encoding

{
    "id": 123,
    "name": "Andrej Karpathy",
    "email": "andrej@example.com",
    "role": "Engineer",
    "_links": {
        "self": { "href": "/users/123/profile" },
        "orders": { "href": "/users/123/orders" },
        "update": { "href": "/users/123/profile", "method": "PATCH" }
    }
}
```

## π§© Maturity Model

λ΅μ΄ ν•„λ”©μ μ΄μƒμ€ λ†’μ•μ§€λ§, ν„μ‹¤μ μ—”μ§€λ‹μ–΄λ“¤μ€ λ‹Ήμ¥ λ™μ‘ν•λ” μ½”λ“λ¥Ό μ§μ•Ό ν–μµλ‹λ‹¤. λ§ν‹΄ νμΈλ¬κ°€ λ€μ¤‘ν™”μ‹ν‚¨ 'λ¦¬μ²λ“μ¨ μ„±μ™λ„ λ¨λΈ(Richardson Maturity Model)'μ€ λ°”λ΅ μ΄ μ§€μ , μ¦‰ νΌλμ μΉ΄μ¤μ¤μ—μ„ ν•„λ”©μ μ ν† ν”Όμ•„λ΅ ν–¥ν•λ” κ³„λ‹¨μ„ μ •μν•©λ‹λ‹¤. μ΄ λ¨λΈμ€ λ‹¨μν κΈ°μ μ  μ™„μ„±λ„λ¥Ό μΈ΅μ •ν•λ” μ£λ€κ°€ μ•„λ‹λΌ, μ„λΉ„μ¤κ°€ λ³µμ΅ν•΄μ§μ— λ”°λΌ λ°μƒν•λ” μ—”λ“ν¬μΈνΈ κ΄€λ¦¬μ μ–΄λ ¤μ›€μ„ μ–΄λ–»κ² ν”„λ΅ν† μ½μ νμΌλ΅ ν•΄κ²°ν•  κ²ƒμΈκ°€μ— λ€ν• μ§„ν™”λ΅ μ  κ΄€μ μ„ μ κ³µν•©λ‹λ‹¤.

### Level 0 to 1: λ¦¬μ†μ¤μ λ°κ²¬κ³Ό μ‹λ³„

μ„±μ™λ„ λ¨λΈμ κ°€μ¥ λ°‘λ°”λ‹¥μΈ λ λ²¨ 0μ€ 'POX(Plain Old XML)μ λ'μ΄λΌ λ¶λ¦½λ‹λ‹¤. μ΄ λ‹¨κ³„μ—μ„ HTTPλ” λ‹¨μν λ°μ΄ν„°λ¥Ό μ‹¤μ–΄ λ‚λ¥΄λ” μ „μ†΅μ© ν„°λ„(Tunneling)μ— λ¶κ³Όν•©λ‹λ‹¤. λ‹¨ ν•λ‚μ μ—”λ“ν¬μΈνΈ(μ: `/api/service`)λ΅ λ¨λ“  μ”μ²­μ„ λ³΄λ‚΄κ³ , μ–΄λ–¤ λ™μ‘μ„ ν• μ§€λ” μ”μ²­ λ³Έλ¬Έ(Body)μ— μ ν ν•¨μ μ΄λ¦„μ— μμ΅΄ν•©λ‹λ‹¤. μ΄λ” μ „ν•μ μΈ RPC(Remote Procedure Call) μ¤νƒ€μΌλ΅, μ‹μ¤ν…μ΄ μ»¤μ§μλ΅ ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„ λ‚΄λ¶€μ ν•¨μ μ΄λ¦„μ„ λ¨λ‘ μ™Έμ›μ•Ό ν•λ” κ°•ν• κ²°ν•©μ— λΉ μ§€κ² λ©λ‹λ‹¤.

λ λ²¨ 1λ΅μ μ§„ν™”λ” 'λ¦¬μ†μ¤'λΌλ” κ°λ…μ„ λ„μ…ν•λ©° μ‹μ‘λ©λ‹λ‹¤. μ΄μ  ν΄λΌμ΄μ–ΈνΈλ” κ±°λ€ν• μ„λΉ„μ¤ ν•λ‚μ™€ λ€ν™”ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, κ°λ³„μ μΌλ΅ μ‹λ³„λλ” λ¦¬μ†μ¤λ“¤κ³Ό λ€ν™”ν•©λ‹λ‹¤. `/users`, `/orders/1`κ³Ό κ°™μ΄ λ…μ‚¬ ν•νƒμ κ²½λ΅κ°€ λ‚νƒ€λ‚λ©°, λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§μ΄ λ¦¬μ†μ¤λΌλ” λ‹¨μ„λ΅ μΌκ°μ§€κΈ° μ‹μ‘ν•©λ‹λ‹¤. ν•μ§€λ§ μ΄ λ‹¨κ³„μ—μ„λ„ μ—¬μ „ν `POST` λ©”μ„λ“ ν•λ‚λ΅ μ΅°ν, μƒμ„±, μ‚­μ λ¥Ό λ¨λ‘ μ²λ¦¬ν•λ” 'λ™μ‚¬μ  μ‚¬κ³ 'μ—μ„ μ™„μ „ν λ²—μ–΄λ‚μ§€λ” λ»ν•©λ‹λ‹¤.

### Level 2: HTTP Verbsλ¥Ό ν†µν• κ·μ•½μ μ™„μ„±

λ λ²¨ 2λ” ν„λ€μ λ€λ‹¤μ 'μ¤€μν•' APIλ“¤μ΄ λ¨Έλ¬΄λ” μ§€μ μ…λ‹λ‹¤. μ—¬κΈ°μ„λ” HTTP ν”„λ΅ν† μ½μ ν‘μ¤€ λ©”μ„λ“(GET, POST, PUT, DELETE)λ¥Ό μλ―Έμ— λ§κ² μ‚¬μ©ν•©λ‹λ‹¤. μ΄ λ‹¨κ³„κ°€ μ¤‘μ”ν• μ΄μ λ” λ‹¨μν 'λ™μ‚¬'λ¥Ό 'λ©”μ„λ“'λ΅ λ°”κΏ¨κΈ° λ•λ¬Έμ΄ μ•„λ‹λΌ, ν”„λ΅ν† μ½ μμ¤€μ—μ„ **μ•μ „μ„±(Safe)**κ³Ό **λ©±λ“±μ„±(Idempotency)**μ΄λΌλ” κ°•λ ¥ν• μ•½μ†μ„ ν™μ©ν•  μ μκ² λκΈ° λ•λ¬Έμ…λ‹λ‹¤.

Amazon Builders' Libraryμ λ¶„μ„μ— λ”°λ¥΄λ©΄, λ¶„μ‚° μ‹μ¤ν…μ—μ„ μ¬μ‹λ„(Retry)λ” ν”Όν•  μ μ—†λ” μ„ νƒμ…λ‹λ‹¤. μ΄λ• APIκ°€ λ λ²¨ 2λ¥Ό μ¤€μν•μ—¬ `GET`μ΄λ‚ `PUT`κ³Ό κ°™μ€ λ©±λ“± λ©”μ„λ“λ¥Ό μ¬λ°”λ¥΄κ² κµ¬ν„ν•κ³  μλ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈλ” λ„¤νΈμ›ν¬ νƒ€μ„μ•„μ›ƒμ΄ λ°μƒν–μ„ λ• μ‹μ¤ν…μ λ¶€μ‘μ©μ„ κ±±μ •ν•μ§€ μ•κ³  μ•μ „ν•κ² μ¬μ‹λ„λ¥Ό μν–‰ν•  μ μμµλ‹λ‹¤. λ°λ©΄, λ¨λ“  κ²ƒμ„ `POST`λ΅ μ²λ¦¬ν•λ” λ λ²¨ 1 μ΄ν•μ μ‹μ¤ν…μ—μ„λ” μ¬μ‹λ„κ°€ μ¤‘λ³µ κ²°μ λ‚ μ¤‘λ³µ μƒμ„± κ°™μ€ μΉλ…μ μΈ λ°μ΄ν„° μ¤μ—ΌμΌλ΅ μ΄μ–΄μ§ μ„ν—μ΄ ν½λ‹λ‹¤.

λν•, λ λ²¨ 2λ” HTTP μƒνƒ μ½”λ“λ¥Ό ν†µν•΄ μ„λ²„μ μƒνƒλ¥Ό μ „λ‹¬ν•©λ‹λ‹¤. Microsoftμ API κ°€μ΄λ“λΌμΈμ΄ κ°•μ΅°ν•λ“―, `200 OK`μ™€ `201 Created`, νΉμ€ `404 Not Found`μ™€ κ°™μ€ ν‘μ¤€ μ½”λ“λ¥Ό μ‚¬μ©ν•¨μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈλ” μ‘λ‹µ λ³Έλ¬Έμ„ νμ‹±ν•΄ λ³΄μ§€ μ•κ³ λ„ μ”μ²­μ μ„±κ³µ μ—¬λ¶€λ¥Ό μ¦‰κ° νλ‹¨ν•  μ μλ” κ°€μ‹μ„±μ„ μ–»κ² λ©λ‹λ‹¤.

![](/assets/img/2026-01-10-15-35-44.png)

### Level 3: ν•μ΄νΌλ―Έλ””μ–΄λ¥Ό ν†µν• μ—”μ§„μΌλ΅μ„μ μƒνƒ μ μ–΄ (HATEOAS)

μ„±μ™λ„μ μ •μ μΈ λ λ²¨ 3μ€ HATEOAS(Hypermedia As The Engine Of Application State)λ¥Ό μ‹¤ν„ν•©λ‹λ‹¤. μ΄ λ‹¨κ³„μ—μ„ μ„λ²„μ μ‘λ‹µμ€ ν„μ¬ λ¦¬μ†μ¤μ λ°μ΄ν„°λΏλ§ μ•„λ‹λΌ, ν΄λΌμ΄μ–ΈνΈκ°€ λ‹¤μ λ‹¨κ³„λ΅ μν–‰ν•  μ μλ” ν–‰λ™(Link) μ •λ³΄λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤. 

μ΄κ²ƒμ€ νλ…μ μΈ λ³€ν™”μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” λ” μ΄μƒ νΉμ • λΉ„μ¦λ‹μ¤ νλ¦„μ„ μ„ν•΄ μ–΄λ–¤ URLλ΅ μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν• μ§€ λ―Έλ¦¬ μ• ν•„μ”κ°€ μ—†μµλ‹λ‹¤. λ§μΉ μ›Ή λΈλΌμ°μ €μ—μ„ ν•μ΄νΌλ§ν¬λ¥Ό νƒ€κ³  λ‹¤μ νμ΄μ§€λ΅ μ΄λ™ν•λ“―, APIκ°€ μ κ³µν•λ” λ§ν¬λ¥Ό λ”°λΌκ°€κΈ°λ§ ν•λ©΄ λ©λ‹λ‹¤. μ΄λ” μ„λ²„κ°€ μΈν„°νμ΄μ¤λ‚ κ²½λ΅λ¥Ό λ³€κ²½ν•λ”λΌλ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό μμ •ν•  ν•„μ”κ°€ μ—†κ² λ§λ“λ” 'κ¶κ·Ήμ λ””μ»¤ν”λ§'μ„ μ•½μ†ν•©λ‹λ‹¤. ν•μ§€λ§ μ΄ μ•½μ†μ—λ” λ§λ§μΉ μ•μ€ λ€κ°€κ°€ λ”°λ¦…λ‹λ‹¤.

> **HATEOAS μ‘λ‹µμ κµ¬μ΅°μ  μ°¨μ΄**
> 
> λ‹¨μν λ°μ΄ν„°λ¥Ό λ°ν™ν•λ” κ²ƒμ„ λ„μ–΄, μ‘λ‹µ λ³Έλ¬Έμ— `_links`λ‚ `rel`κ³Ό κ°™μ€ λ©”νƒ€λ°μ΄ν„°λ¥Ό ν¬ν•¨μ‹μΌ μ• ν”λ¦¬μΌ€μ΄μ…μ μƒνƒ μ „μ΄λ¥Ό κ°€μ΄λ“ν•©λ‹λ‹¤.
{: .prompt-tip }

```json
// Level 0: The Swamp of POX (RPC μ¤νƒ€μΌ)
// POST /userService
{
    "function": "cancelOrder",
    "orderId": "ORD-99",
    "reason": "changed mind"
}

// --------------------------------------------------

// Level 3: HATEOAS (HAL ν‘μ¤€ μ μ©)
// GET /orders/99
{
    "orderId": "ORD-99",
    "status": "AWAITING_PAYMENT",
    "amount": 150.00,
    "currency": "USD",
    "_links": {
        "self": { "href": "/orders/99" },
        "payment": { "href": "/orders/99/payment" },
        "cancel": { "href": "/orders/99/cancellation" }
    }
}
```

## HATEOAS Trade-off

λ΅μ΄ ν•„λ”©μ€ RESTμ μ •μκ°€ ν•μ΄νΌλ―Έλ””μ–΄(HATEOAS)μ— μλ‹¤κ³  λ‹¨μ–Έν–μµλ‹λ‹¤. κ·Έλ” "λ§μ•½ μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒμ μ—”μ§„μ΄ ν•μ΄νΌλ―Έλ””μ–΄κ°€ μ•„λ‹λΌλ©΄, κ·Έκ²ƒμ€ RESTκ°€ μ•„λ‹λ‹¤"λΌκ³  μ„ μ–Έν•  μ •λ„λ΅ μ΄ μ μ•½ μ΅°κ±΄μ„ κ°•μ΅°ν–μµλ‹λ‹¤. ν•μ§€λ§ μ‹¤μ  μ‚°μ—… ν„μ¥μ—μ„ λ λ²¨ 3 μ„±μ™λ„λ¥Ό λ‹¬μ„±ν• APIλ¥Ό μ°ΎκΈ°λ€ λ³΄λ¬Όμ°ΎκΈ°λ§νΌμ΄λ‚ μ–΄λ µμµλ‹λ‹¤. μ™ μ΄ 'μ•„ν‚¤ν…μ²μ  μ ν† ν”Όμ•„'λ” κ°λ°μλ“¤μ—κ² μ¶•λ³µμΈ λ™μ‹μ— μ €μ£Όκ°€ λμ—μ„κΉμ”?

### ν΄λΌμ΄μ–ΈνΈ κ²°ν•©λ„ ν•΄μ μ μ΄λ΅ μ  μ΄μƒ

HATEOASμ κ°€μ¥ ν° μ¶•λ³µμ€ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ **μ™„μ „ν• λ””μ»¤ν”λ§**μ…λ‹λ‹¤. μΌλ°μ μΈ API μ„¤κ³„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ” "μ£Όλ¬Έμ„ μ·¨μ†ν•λ ¤λ©΄ `POST /orders/{id}/cancel`λ΅ μ”μ²­μ„ λ³΄λ‚΄μ•Ό ν•λ‹¤"λ” μ‚¬μ‹¤μ„ μ½”λ“λ΅ ν•λ“μ½”λ”©ν•©λ‹λ‹¤. μ΄λ” μ„λ²„κ°€ λΉ„μ¦λ‹μ¤ λ΅μ§μ΄λ‚ URL κµ¬μ΅°λ¥Ό λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ•±μ λ°°ν¬κ°€ κ°•μ λ¨μ„ μλ―Έν•©λ‹λ‹¤.

λ°λ©΄, λ΅μ΄ ν•„λ”©μ μ² ν•™μ„ κµ¬ν„ν• APIμ—μ„ ν΄λΌμ΄μ–ΈνΈλ” μ¤μ§ 'μ§„μ…μ (Entry Point)'λ§μ„ μ•κ³  μ‹μ‘ν•©λ‹λ‹¤. μ„λ²„λ” μ‘λ‹µ λ³Έλ¬Έμ— ν„μ¬ μƒνƒμ—μ„ κ°€λ¥ν• λ‹¤μ ν–‰λ™λ“¤μ„ λ§ν¬ ν•μ‹μΌλ΅ λ™λ΄‰ν•©λ‹λ‹¤. 

λ§ν‹΄ νμΈλ¬(Martin Fowler)κ°€ μ„¤λ…ν• λ¦¬μ²λ“μ¨ μ„±μ™λ„ λ¨λΈμ— λ”°λ¥΄λ©΄, μ΄ λ°©μ‹μ€ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ νκ΄΄μ  λ³€κ²½ μ—†μ΄ μΈν„°νμ΄μ¤λ¥Ό μ§„ν™”μ‹ν‚¬ μ μλ” μμ¨μ„±μ„ λ¶€μ—¬ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, 'μ£Όλ¬Έ μ·¨μ†' κΈ°λ¥μ΄ νΉμ • μ΅°κ±΄(λ°°μ†΅ μ‹μ‘ μ „)μ—μ„λ§ κ°€λ¥ν•λ‹¤λ©΄, μ„λ²„λ” ν•΄λ‹Ή μ΅°κ±΄μ΄ μ¶©μ΅±λ  λ•λ§ μ·¨μ† λ§ν¬λ¥Ό μ‘λ‹µμ— ν¬ν•¨ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” λ§ν¬μ μ΅΄μ¬ μ—¬λ¶€λ§ μ²΄ν¬ν•λ©΄ λ  λΏ, λ³µμ΅ν• μ·¨μ† κ°€λ¥ μ—¬λ¶€ λ΅μ§μ„ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ μ¤‘λ³µ κµ¬ν„ν•  ν•„μ”κ°€ μ—†μ–΄μ§‘λ‹λ‹¤.

![](/assets/img/2026-01-10-15-36-10.png)

### ν„μ‹¤μ  λ„¤νΈμ›ν¬ μ¤λ²„ν—¤λ“μ™€ μ¤λ²„μ—”μ§€λ‹μ–΄λ§μ κ²½κ³„

μ΄λ¬ν• μ°μ•„ν• μ΄λ΅ μ—λ„ λ¶κµ¬ν•κ³ , HATEOASλ” ν„μ—…μ—μ„ κ±°μ„Ό μ €ν•­μ— λ¶€λ”ν™λ‹λ‹¤. κ°€μ¥ ν° μ΄μ λ” **μ„±λ¥κ³Ό λ³µμ΅μ„±μ νΈλ μ΄λ“μ¤ν”„**μ…λ‹λ‹¤.

1.  **λ„¤νΈμ›ν¬ μ¤λ²„ν—¤λ“**: λ§¤ μ‘λ‹µλ§λ‹¤ μλ§μ€ λ§ν¬ λ©”νƒ€λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•λ” κ²ƒμ€ νμ΄λ΅λ“ ν¬κΈ°λ¥Ό ν‚¤μ›λ‹λ‹¤. νΉν λ¨λ°”μΌ ν™κ²½μ²λΌ λ€μ—­ν­μ΄ μ ν•μ μΈ μƒν™©μ—μ„ μμ‹­ κ°μ URL λ§ν¬λ” μ μλ―Έν• λ μ΄ν„΄μ‹ μ¦κ°€λ¥Ό μ΄λν•©λ‹λ‹¤.
2.  **ν΄λΌμ΄μ–ΈνΈμ κµ¬ν„ λ‚μ΄λ„**: ν•μ΄νΌλ―Έλ””μ–΄λ¥Ό μ λ€λ΅ ν™μ©ν•λ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈλ” λ‹¨μν• λ°μ΄ν„° νμ„λ¥Ό λ„μ–΄ 'λ‚΄λΉ„κ²μ΄ν„°' μ—­ν• μ„ μν–‰ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ” ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ λ³µμ΅λ„λ¥Ό λ†’μ΄λ©°, κ°λ° μƒμ‚°μ„±μ„ μ €ν•΄ν•λ” μ”μΈμ΄ λ©λ‹λ‹¤.
3.  **λ¬Έμ„ν™”μ μ—­μ„¤**: λ§ν¬λ¥Ό λ™μ μΌλ΅ μ¤€λ‹¤κ³  ν•΄μ„ λ¬Έμ„ν™”κ°€ ν•„μ” μ—†λ” κ²ƒμ΄ μ•„λ‹™λ‹λ‹¤. μ¤νλ ¤ κ° λ§ν¬μ `rel`(Relation)μ΄ μλ―Έν•λ” λ°”λ¥Ό μ„¤λ…ν•λ” λ³„λ„μ λ©”νƒ€ λ°μ΄ν„° μ •μκ°€ ν•„μ”ν•΄μ§€λ©°, μ΄λ” Swagger(OpenAPI)μ™€ κ°™μ€ ν‘μ¤€ λ„κµ¬λ“¤κ³Ό λ§¤λ„λ½κ² κ²°ν•©λμ§€ μ•λ” κ²½μ°κ°€ λ§μµλ‹λ‹¤.

κ²°κµ­ λ§μ€ μ—”μ§€λ‹μ–΄λ“¤μ€ "μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ‚΄κ°€ λ¨λ‘ ν†µμ ν•  μ μλ” μƒν™©μΈλ°, κµ³μ΄ μ΄λ° λ³µμ΅μ„±μ„ κ°μν•΄μ•Ό ν•λ”κ°€?"λΌλ” μ‹¤μ©μ  μ§λ¬Έμ„ λμ§€κ² λ©λ‹λ‹¤. μ΄κ²ƒμ΄ λ€λ¶€λ¶„μ μ„λΉ„μ¤κ°€ λ λ²¨ 2μ— μ•μ£Όν•λ©°, HATEOASλ¥Ό 'μ„ νƒλ°›μ€ μλ“¤μ μ‚¬μΉ'λ΅ μΉλ¶€ν•κ² λ λ°°κ²½μ…λ‹λ‹¤.

> **HATEOASλ¥Ό μ–΄λ””μ— ν•μ •ν•μ—¬ λ„μ…ν•΄μ•Ό ν• κΉ?**
> 
> λ¨λ“  APIμ— HATEOASλ¥Ό μ μ©ν•κΈ°λ³΄λ‹¤, λΉ„μ¦λ‹μ¤ νλ¦„μ΄ λ³µμ΅ν•κ³  μƒνƒ μ „μ΄κ°€ μ¦μ€ ν•µμ‹¬ λ„λ©”μΈ(μ: λ³µμ΅ν• κ²°μ  ν”„λ΅μ„Έμ¤)μ— ν•μ •ν•μ—¬ λ¶€λ¶„μ μΌλ΅ λ„μ…ν•λ” κ²ƒμ΄ μ—”μ§€λ‹μ–΄λ§ μΈ΅λ©΄μ—μ„ ν•©λ¦¬μ μΌ μ μμµλ‹λ‹¤.
{: .prompt-warning }

```json
// GET /api/v1/orders/ORD-2026-99
{
    "orderId": "ORD-2026-99",
    "status": "AWAITING_PAYMENT",
    "customer": "Andrej Karpathy",
    "items": [
        { "name": "GeForce RTX 5090", "quantity": 1, "price": 1999.00 }
    ],
    "totalAmount": 1999.00,
    "currency": "USD",
    "createdAt": "2026-01-10T15:30:00Z",

    "_links": {
        "self": { "href": "/api/v1/orders/ORD-2026-99" },
        "payment": { 
            "href": "/api/v1/payments/pay",
            "method": "POST",
            "title": "κ²°μ ν•κΈ°" 
        },
        "cancel": { 
            "href": "/api/v1/orders/ORD-2026-99/cancellation",
            "method": "DELETE",
            "title": "μ£Όλ¬Έ μ·¨μ†" 
        },
        "help": { "href": "https://docs.example.com/api/orders/status" }
    }
}
```

## Idempotency Strategy

μ„±μ™λ„ λ¨λΈ λ λ²¨ 2μ—μ„ HTTP λ©”μ„λ“λ¥Ό κ·μ•½μ— λ§κ² μ‚¬μ©ν•λ” κ²ƒμ€ μ‹μ‘μ— λ¶κ³Όν•©λ‹λ‹¤. μ‹¤μ  λ¶„μ‚° μ‹μ¤ν…μ μ „μ¥μ—μ„ κ°€μ¥ λ‹¤λ£¨κΈ° κΉλ‹¤λ΅μ΄ μ£Όμ λ” "λ„¤νΈμ›ν¬λ” μ–Έμ λ‚ μ‹¤ν¨ν•  μ μλ‹¤"λ” κ°€μ •ν•μ— μ‹μ¤ν…μ μ •ν•©μ„±μ„ μ μ§€ν•λ” κ²ƒμ…λ‹λ‹¤. μ—¬κΈ°μ„ λ“±μ¥ν•λ” κ°λ…μ΄ λ°”λ΅ λ©±λ“±μ„±(Idempotency)μ…λ‹λ‹¤. λ©±λ“±μ„±μ€ λ™μΌν• μ”μ²­μ„ μ—¬λ¬ λ² μν–‰ν•λ”λΌλ„ κ²°κ³Όκ°€ μ²μ ν• λ² μν–‰ν–μ„ λ•μ™€ κ°™μ•„μ•Ό ν•¨μ„ μλ―Έν•λ©°, μ΄λ” λ‹¨μν• μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ„ λ„μ–΄ μ‹μ¤ν…μ μƒμ΅΄ μ „λµμΌλ΅ κΈ°λ¥ν•©λ‹λ‹¤.

### PUT/DELETEμ™€ Idempotency-Key μ „λµ

HTTP λ…μ„Έμ— λ”°λ¥΄λ©΄ `GET`, `PUT`, `DELETE`λ” λ³Έλ λ©±λ“±ν•©λ‹λ‹¤. ν•μ§€λ§ ν„μ‹¤μ λΉ„μ¦λ‹μ¤ λ΅μ§μ€ λ…μ„Έλ§νΌ λ‹¨μν•μ§€ μ•μµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, `PUT /users/1` μ”μ²­μ΄ λ„¤νΈμ›ν¬ νƒ€μ„μ•„μ›ƒμΌλ΅ μ‹¤ν¨ν–μ„ λ•, ν΄λΌμ΄μ–ΈνΈλ” μ΄ μ”μ²­μ΄ μ„λ²„μ— λ„λ‹¬ν•΄ μ²λ¦¬κ°€ λλ‚¬λ”μ§€, μ•„λ‹λ©΄ λ„λ‹¬μ΅°μ°¨ λ» ν–λ”μ§€ μ• κΈΈμ΄ μ—†μµλ‹λ‹¤. 

Amazon Builders' Libraryμ μ„¤λ…μ— λ”°λ¥΄λ©΄, νƒ€μ„μ•„μ›ƒμ΄λ‚ μ‹¤ν¨κ°€ λ°μƒν–λ‹¤κ³  ν•΄μ„ λ¶€μ‘μ©(Side-effects)μ΄ μΌμ–΄λ‚μ§€ μ•μ•μμ„ λ³΄μ¥ν•μ§€λ” μ•μµλ‹λ‹¤. λ§μ•½ APIκ°€ λ©±λ“±ν•κ² μ„¤κ³„λμ§€ μ•μ•λ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈμ μ•μ „ν• μ¬μ‹λ„λ” λ¶κ°€λ¥ν•΄μ§‘λ‹λ‹¤. μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ Stripeμ™€ κ°™μ€ μ„ λ„μ μΈ ν…ν¬ κΈ°μ—…λ“¤μ€ `Idempotency-Key`λΌλ” μ»¤μ¤ν…€ ν—¤λ”λ¥Ό μ‹¤λ¬΄ ν‘μ¤€μΌλ΅ μ •μ°©μ‹μΌ°μµλ‹λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” μ”μ²­ μ‹ κ³ μ ν• ν‚¤(UUID λ“±)λ¥Ό μƒμ„±ν•μ—¬ λ³΄λƒ…λ‹λ‹¤. μ„λ²„λ” μ΄ ν‚¤λ¥Ό λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•κ³ , λ™μΌν• ν‚¤λ΅ μ”μ²­μ΄ λ‹¤μ‹ λ“¤μ–΄μ¤λ©΄ μ‹¤μ  λ΅μ§μ„ μ‹¤ν–‰ν•λ” λ€μ‹  μ΄μ „μ— μ €μ¥ν•΄λ‘μ—λ μ‘λ‹µμ„ κ·Έλ€λ΅ λ°ν™ν•©λ‹λ‹¤. Amazon EC2μ `RunInstances` APIκ°€ μ κ³µν•λ” ν† ν° κΈ°λ° λ©”μ»¤λ‹μ¦ μ—­μ‹ μ΄μ™€ λ™μΌν• μ² ν•™μ„ κ³µμ ν•λ©°, λ¦¬μ†μ¤ μƒμ„± μ‘μ—…μ—μ„λ„ μ•μ „ν• μ¬μ‹λ„λ¥Ό λ³΄μ¥ν•©λ‹λ‹¤.

### λ¶„μ‚° μ‹μ¤ν…μ—μ„μ μ¤‘λ³µ μ”μ²­ μ²λ¦¬ λ©”μ»¤λ‹μ¦

λ¶„μ‚° μ•„ν‚¤ν…μ²μ—μ„ λ©±λ“±μ„±μ΄ κ²°μ—¬λ μ¬μ‹λ„λ” μ¬μ•™μ„ μ΄λν•©λ‹λ‹¤. Amazonμ λ¶„μ„μ— λ”°λ¥΄λ©΄, μ¬μ‹λ„λ” λ³Έμ§μ μΌλ΅ 'μ΄κΈ°μ μΈ(Selfish)' ν–‰μ„μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ μ„±κ³µ κ°€λ¥μ„±μ„ λ†’μ΄κΈ° μ„ν•΄ μ„λ²„μ μμ›μ„ λ” λ§μ΄ μ†λ¨ν•λ„λ΅ μ”κµ¬ν•κΈ° λ•λ¬Έμ…λ‹λ‹¤.

λ” μ‹¬κ°ν• κ²ƒμ€ μ¬μ‹λ„μ 'μ¦ν­ ν„μƒ'μ…λ‹λ‹¤. 5λ‹¨κ³„λ΅ μ΄λ¤„μ§„ λ§μ΄ν¬λ΅μ„λΉ„μ¤ νΈμ¶ μ²΄μΈμ—μ„ κ° λ‹¨κ³„κ°€ λ…λ¦½μ μΌλ΅ 3λ²μ”© μ¬μ‹λ„λ¥Ό μν–‰ν•λ‹¤λ©΄, ν•μ„ λ°μ΄ν„°λ² μ΄μ¤κ°€ λ°›λ” λ¶€ν•λ‰μ€ μ›λμ 243λ°°κΉμ§€ ν­μ¦ν•  μ μμµλ‹λ‹¤. μ΄λ¬ν• μƒν™©μ—μ„ λ©±λ“±μ„±μ΄ λ‹΄λ³΄λμ§€ μ•λ”λ‹¤λ©΄, μ¤‘λ³µ λ°μ΄ν„° μƒμ„±κ³Ό λ¶€ν• ν­μ¦μ΄ λ§λ¬Όλ ¤ μ‹μ¤ν…μ€ κ±°λ€ν• 'λ°μ¤ μ¤νμ΄λ΄(Death Spiral)'μ— λΉ μ§€κ² λ©λ‹λ‹¤. 

λ”°λΌμ„ λ©±λ“±μ„± μ„¤κ³„λ” λ‹¨μν 'μ¤‘λ³µ κ²°μ  λ°©μ§€' μμ¤€μ„ λ„μ–΄, μ§€μ λ°±μ¤ν”„(Exponential Backoff)μ™€ μ§€ν„°(Jitter)λ¥Ό μ μ©ν• μ¬μ‹λ„ μ „λµμ΄ μ‹μ¤ν…μ„ νκ΄΄ν•μ§€ μ•λ„λ΅ λ§λ“λ” μµν›„μ λ³΄λ£¨μ…λ‹λ‹¤. μ—”μ§€λ‹μ–΄λ” ν‘μ¤€ HTTP λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ„ λ„μ–΄, λΉ„μ¦λ‹μ¤ μ—λ¬μ™€ ν”„λ΅ν† μ½ μ‹¤ν¨κ°€ μ—‰ν‚¤λ” μ§€μ μ—μ„ μ–΄λ–»κ² μƒνƒλ¥Ό μ›μμ (Atomic)μΌλ΅ κ΄€λ¦¬ν• μ§€ κ³ λ―Όν•΄μ•Ό ν•©λ‹λ‹¤.

> **λ©±λ“±μ„± μ„¤κ³„μ κ³¨λ“  λ£°**
> 
> μ½κΈ° μ „μ© APIλ” μμ—°μ¤λ½κ² λ©±λ“±ν•μ§€λ§, λ¦¬μ†μ¤ μƒμ„±(POST)μ΄λ‚ λ³µμ΅ν• μƒνƒ μ „μ΄λ” λ…μ‹μ μΈ ν† ν° λ©”μ»¤λ‹μ¦μ΄ ν•„μ”ν•©λ‹λ‹¤. λ©±λ“±μ„±μ€ ν΄λΌμ΄μ–ΈνΈκ°€ 'μ•μ‹¬ν•κ³  λ‹¤μ‹ μ‹λ„'ν•  μ μλ” κ¶λ¦¬λ¥Ό λ¶€μ—¬ν•©λ‹λ‹¤.
{: .prompt-tip }

```java
// [CODE_ID_03: Stripe/Amazon μ¤νƒ€μΌμ λ©±λ“±μ„± μ²λ¦¬ λ΅μ§ (Java)]

@PostMapping("/v1/orders")
public ResponseEntity<OrderResponse> createOrder(
    @RequestHeader(value = "Idempotency-Key", required = false) String idempotencyKey,
    @RequestBody OrderRequest request
) {
    // 1. λ©±λ“±μ„± ν‚¤κ°€ μ—†λ” κ²½μ°: μΌλ°μ μΈ λΉ„μ¦λ‹μ¤ λ΅μ§ μν–‰
    if (idempotencyKey == null || idempotencyKey.isBlank()) {
        return ResponseEntity.ok(orderService.process(request));
    }

    // 2. μ €μ¥μ†(Redis λ“±)μ—μ„ κΈ°μ΅΄ μ²λ¦¬ λ‚΄μ—­ ν™•μΈ (Atomic Look-up)
    // Amazon Builders' Libraryμ κ¶κ³ μ— λ”°λΌ, μ΄λ―Έ μ™„λ£λ μ”μ²­μ€ μ¤‘λ³µ μ‹¤ν–‰ μ—†μ΄ μ¦‰μ‹ λ°ν™ν•¨
    IdempotencyRecord cachedRecord = idempotencyRepository.findByKey(idempotencyKey);
    
    if (cachedRecord != null) {
        if (cachedRecord.isProcessing()) {
            // λ™μΌ ν‚¤λ΅ ν„μ¬ μ²λ¦¬ μ¤‘μΈ μ”μ²­μ΄ μλ” κ²½μ° 409 Conflict λ°ν™
            return ResponseEntity.status(HttpStatus.CONFLICT).build();
        }
        // μ €μ¥λ μ‘λ‹µ κ°μ²΄λ¥Ό λ°ν™ (Payloadμ™€ μƒνƒ μ½”λ“ λ³µμ›)
        return ResponseEntity.status(cachedRecord.getStatusCode())
                             .body(cachedRecord.getResponsePayload());
    }

    // 3. λ©±λ“±μ„± λ μ½”λ“ μƒμ„± (μ²λ¦¬ μ¤‘ μƒνƒλ΅ ν‘μ‹ν•μ—¬ Race Condition λ°©μ§€)
    idempotencyRepository.save(new IdempotencyRecord(idempotencyKey, Status.PROCESSING));

    try {
        // 4. μ‹¤μ  λΉ„μ¦λ‹μ¤ λ΅μ§ μν–‰ (κ²°μ , λ¦¬μ†μ¤ μƒμ„± λ“± Side-effects λ°μƒ μ§€μ )
        OrderResponse response = orderService.process(request);

        // 5. μ²λ¦¬ κ²°κ³Ό λ° μ‘λ‹µ μƒνƒ μ €μ¥ (24μ‹κ°„ λ“± TTL μ„¤μ • κ¶μ¥)
        idempotencyRepository.updateResult(idempotencyKey, response, HttpStatus.OK);

        return ResponseEntity.ok(response);

    } catch (Exception e) {
        // 6. μμ™Έ λ°μƒ μ‹ λ©±λ“±μ„± λ μ½”λ“ μ‚­μ  λλ” μ‹¤ν¨ μƒνƒ κΈ°λ΅
        // ν΄λΌμ΄μ–ΈνΈκ°€ μ΄ν›„μ— λ™μΌν• ν‚¤λ΅ μ•μ „ν•κ² μ¬μ‹λ„ν•  μ μλ„λ΅ λ³΄μ¥ν•¨
        idempotencyRepository.deleteByKey(idempotencyKey);
        throw e;
    }
}
```

## HTTP Semantics Pollution

μ°λ¦¬λ” μΆ…μΆ… λ¨λ“  μ‘λ‹µμ΄ `200 OK`λ΅ λμ•„μ¤μ§€λ§, κ·Έ μ†μ„ μ—΄μ–΄λ³΄λ©΄ `{"success": false, "message": "Balance insufficient"}`μ™€ κ°™μ€ λ©”μ‹μ§€κ°€ λ‹΄κΈ΄ APIλ¥Ό λ§μ£Όν•©λ‹λ‹¤. μ΄κ²ƒμ€ HTTPλΌλ” μ •κµν• μ–Έμ–΄λ¥Ό λ‹¨μ§€ 'λ°μ΄ν„° μ „μ†΅ λ΄‰ν¬'λ΅ μ „λ½μ‹ν‚¤λ” ν–‰μ„μ…λ‹λ‹¤. λ΅μ΄ ν•„λ”©μ΄ κ°•μ΅°ν• 'μκΈ° μ„μ μ  λ©”μ‹μ§€(Self-descriptive messages)'μ κ΄€μ μ—μ„ λ³Ό λ•, μ΄λ¬ν• μ„¤κ³„λ” μΊμ‹ ν”„λ΅μ‹λ‚ λ΅λ“ λ°Έλ°μ„μ™€ κ°™μ€ λ„¤νΈμ›ν¬ μ¤‘κ°„ κ³„μΈµ(Intermediaries)μ λμ„ κ°€λ¦¬λ” ν–‰μ„μ™€ κ°™μµλ‹λ‹¤.

### 200 OK λ’¤μ— μ¨κ²¨μ§„ λΉ„μ¦λ‹μ¤ μ—λ¬μ λ¨μ

HTTP μƒνƒ μ½”λ“λ” λ‹¨μν μ„±κ³µκ³Ό μ‹¤ν¨λ¥Ό μ•λ¦¬λ” μ‹ νΈλ“±μ΄ μ•„λ‹™λ‹λ‹¤. κ·Έκ²ƒμ€ μ „ μ§€κµ¬μ  λ„¤νΈμ›ν¬κ°€ μ”μ²­μ μ„±κ²©μ„ μ΄ν•΄ν•κ³  μ²λ¦¬ν•λ” 'κ³µμ©μ–΄'μ…λ‹λ‹¤. 

Amazon Builders' Libraryμ μ„¤λ…μ— λ”°λ¥΄λ©΄, HTTPλ” ν΄λΌμ΄μ–ΈνΈ μ—λ¬(4xx)μ™€ μ„λ²„ μ—λ¬(5xx)λ¥Ό λ…ν™•ν κµ¬λ¶„ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈ μ—λ¬λ” λ™μΌν• μ”μ²­μ„ μ¬μ‹λ„ν•΄λ„ μ„±κ³µν•  κ°€λ¥μ„±μ΄ μ—†μμ„ λ‚νƒ€λ‚΄λ©°, μ„λ²„ μ—λ¬λ” μΌμ‹μ μΈ μ¥μ• μΌ μ μμΌλ―€λ΅ λ‚μ¤‘μ— λ‹¤μ‹ μ‹λ„ν•λ©΄ μ„±κ³µν•  μ μμμ„ μλ―Έν•©λ‹λ‹¤. λ§μ•½ λ¨λ“  μ‘λ‹µμ„ `200 OK`λ΅ ν†µμΌν•΄λ²„λ¦°λ‹¤λ©΄, ν‘μ¤€μ μΈ λ„¤νΈμ›ν¬ μ¥λΉ„λ‚ λΌμ΄λΈλ¬λ¦¬λ” ν•΄λ‹Ή μ”μ²­μ΄ μ¬μ‹λ„ κ°€λ¥ν•μ§€, μ•„λ‹λ©΄ μ¦‰μ‹ μ¤‘λ‹¨ν•΄μ•Ό ν•λ”μ§€ νλ‹¨ν•  μ μ—†κ² λ©λ‹λ‹¤. μ΄λ” μ‹μ¤ν… μ „λ°μ κ°€μ‹μ„±κ³Ό λ³µκµ¬ λ¥λ ¥μ„ ν¬κ² μ €ν•΄ν•©λ‹λ‹¤.

### ν”„λ΅ν† μ½ μ—λ¬μ™€ μ• ν”λ¦¬μΌ€μ΄μ… μ—λ¬μ μ •κµν• λ¶„λ¦¬ μ„¤κ³„

μ§„μ •μΌλ΅ μ„±μ™ν• APIλ” ν”„λ΅ν† μ½ μμ¤€μ μ‹¤ν¨μ™€ μ• ν”λ¦¬μΌ€μ΄μ… μμ¤€μ λΉ„μ¦λ‹μ¤ μ‹¤ν¨λ¥Ό μ°μ•„ν•κ² κ²©λ¦¬ν•©λ‹λ‹¤. Microsoftμ API κ°€μ΄λ“λΌμΈμ€ μƒνƒ μ½”λ“λ¥Ό μλ―Έλ΅ μ μΌλ΅ μ •ν™•ν•κ² μ‚¬μ©ν•  κ²ƒμ„ κ¶κ³ ν•©λ‹λ‹¤.

μλ¥Ό λ“¤μ–΄, λ¦¬μ†μ¤λ¥Ό μ°Ύμ§€ λ»ν• κ²½μ° `404 Not Found`λ¥Ό, μΈμ¦μ€ λμ—μΌλ‚ κ¶ν•μ΄ μ—†λ” κ²½μ° `403 Forbidden`μ„ μ‚¬μ©ν•λ” μ‹μ…λ‹λ‹¤. μ—¬κΈ°μ„ ν• κ±Έμ λ” λ‚μ•„κ°€, λΉ„μ¦λ‹μ¤ μ—λ¬ μ½”λ“λ” HTTP μƒνƒ μ½”λ“κ°€ μ•„λ‹ μ‘λ‹µ λ³Έλ¬Έμ λ³„λ„ ν•„λ“(μ: `errorCode`)λ΅ μ •μν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ” ν΄λΌμ΄μ–ΈνΈ μ—”μ§€λ‹μ–΄κ°€ "λ„¤νΈμ›ν¬κ°€ λκ²Όλ”κ°€(Protocol Error)?"μ™€ "λ‚΄ μ”μ•΅μ΄ λ¶€μ΅±ν•κ°€(Business Error)?"λ¥Ό λ…ν™•ν κµ¬λ¶„ν•μ—¬ μ²λ¦¬ν•  μ μκ² λ•μµλ‹λ‹¤.

> **μ—λ¬ μ²λ¦¬μ ν™©κΈλ¥ **
> 
> HTTP μƒνƒ μ½”λ“λ” 'μ”μ²­ μ²λ¦¬μ κ²°κ³Ό'λ¥Ό κΈ°μ ν•κ³ , μ‘λ‹µ λ³Έλ¬Έμ μ—λ¬ κ°μ²΄λ” 'μ‹¤ν¨μ κµ¬μ²΄μ  μ΄μ 'λ¥Ό κΈ°μ ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄ λ‘μ„ μ„λ” μκ°„, APIμ λ²”μ©μ„±μ€ λ¬΄λ„μ§‘λ‹λ‹¤.
{: .prompt-info }

μ„±μ™λ„ λ¨λΈμ κ³„λ‹¨μ„ μ¤λ¥΄λ” κ²ƒμ€ λ‹¨μν• κΈ°μ μ  μμ΅΄μ‹¬μ λ¬Έμ κ°€ μ•„λ‹™λ‹λ‹¤. κ·Έκ²ƒμ€ μ‹μ¤ν…μ μμΈ΅ κ°€λ¥μ„±μ„ λ†’μ΄κ³ , Amazonμ΄ μ–ΈκΈ‰ν• 'μ΄κΈ°μ μΈ μ¬μ‹λ„'κ°€ μ‹μ¤ν…μ„ λ¶•κ΄΄μ‹ν‚¤μ§€ μ•λ„λ΅ λ°©μ–΄λ§‰μ„ κµ¬μ¶•ν•λ” μ‹¤μ²μ μΈ μ—”μ§€λ‹μ–΄λ§μ…λ‹λ‹¤.

## Summary

REST APIμ™€ μ„±μ™λ„ λ¨λΈμ€ λ‹¨μν 'μμ URL'μ„ λ§λ“λ” κ·μΉ™μ΄ μ•„λ‹λΌ, λ¶„μ‚° μ‹μ¤ν…μ λ³µμ΅μ„±μ„ κ΄€λ¦¬ν•κ³  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ λ…λ¦½μ  μ§„ν™”λ¥Ό λ³΄μ¥ν•κΈ° μ„ν• μ•„ν‚¤ν…μ²μ  μ¥μΉμ…λ‹λ‹¤. λ¦¬μ†μ¤ μ¤‘μ‹¬μ μ„¤κ³„μ™€ HTTP λ©”μ„λ“μ λ©±λ“±μ„±μ„ μ¬λ°”λ¥΄κ² ν™μ©ν•  λ•, μ‹μ¤ν…μ€ λ„¤νΈμ›ν¬ μ‹¤ν¨λΌλ” κ°€νΉν• ν™κ²½μ—μ„λ„ Amazonμ΄ κ°•μ΅°ν•λ” νλ³µ νƒ„λ ¥μ„±(Resilience)μ„ ν™•λ³΄ν•  μ μμµλ‹λ‹¤. λΉ„λ΅ HATEOASμ™€ κ°™μ€ μ΄μƒμ  μ μ•½ μ΅°κ±΄μ΄ ν„μ‹¤μ μΈ νΈλ μ΄λ“μ¤ν”„μ— λ¶€λ”νκΈ°λ„ ν•μ§€λ§, ν‘μ¤€ κ·μ•½μ„ μ¤€μν•λ” κ²ƒμ€ κ²°κµ­ λ€κ·λ¨ μ‹μ¤ν…μ„ μ μ§€λ³΄μν•λ” λΉ„μ©μ„ νκΈ°μ μΌλ΅ λ‚®μ¶”λ” κ°€μ¥ ν™•μ‹¤ν• ν¬μμ…λ‹λ‹¤.

## References

* [[Amazon] Timeouts, retries and backoff with jitter](https://aws.amazon.com/ko/builders-library/timeouts-retries-and-backoff-with-jitter/)
* [[Martin Fowler] Richardson Maturity Model](https://martinfowler.com/articles/richardsonMaturityModel.html)
* [[Roy Fielding] REST Dissertation (Chapter 5)](https://roy.gbiv.com/pubs/dissertation/top.htm)
* [[Stripe] Idempotent Requests (API Ref)](https://docs.stripe.com/api/idempotent_requests)
* [[Microsoft] REST API Guidelines](https://github.com/microsoft/api-guidelines/blob/vNext/Guidelines.md)